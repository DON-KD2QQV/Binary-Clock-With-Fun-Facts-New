let hourColumn=document.getElementById("hours"),minuteColumn=document.getElementById("minutes"),secondColumn=document.getElementById("seconds"),digitalClock=document.getElementById("digital-clock"),geminiButton=document.getElementById("gemini-button"),factContainer=document.getElementById("fact-container"),BITS=6,currentTime={h:0,m:0};function createLights(e){for(let t=0;t<BITS;t++){var n=document.createElement("div");n.classList.add("light","w-8","h-8","md:w-12","md:h-12","rounded-full","bg-gray-700"),n.dataset.value=Math.pow(2,t),e.appendChild(n)}}function updateColumn(t,e,n){var o=n.toString(2).padStart(BITS,"0"),a=t.children;for(let t=0;t<BITS;t++){var i=a[t],r=o[BITS-1-t];i.classList.toggle(e,"1"===r)}}function updateClock(){var t=new Date,e=t.getHours(),n=t.getMinutes(),t=t.getSeconds();currentTime={h:e,m:n},updateColumn(hourColumn,"hour-on",e),updateColumn(minuteColumn,"minute-on",n),updateColumn(secondColumn,"second-on",t),digitalClock.textContent=`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:`+String(t).padStart(2,"0")}async function getTimeFact(){geminiButton.disabled=!0,geminiButton.textContent="Thinking...",factContainer.innerHTML='<div class="animate-pulse">Fetching a fact from the cosmos...</div>';var{h:t,m:e}=currentTime,t=`Tell me a short, interesting, or historical fact related to the time ${String(t).padStart(2,"0")+":"+String(e).padStart(2,"0")}.`;try{var n=await fetch("timefact.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t})});if(!n.ok)throw new Error("Error: "+n.statusText);var o=await n.json();factContainer.textContent=o.fact||"No fact received."}catch(t){console.error(t),factContainer.textContent="Sorry, I couldn't fetch a fact."}finally{geminiButton.disabled=!1,geminiButton.textContent="Get Time Fact âœ¨"}}createLights(hourColumn),createLights(minuteColumn),createLights(secondColumn),updateClock(),setInterval(updateClock,1e3),geminiButton.addEventListener("click",getTimeFact);