let hourColumn=document.getElementById("hours"),minuteColumn=document.getElementById("minutes"),secondColumn=document.getElementById("seconds"),digitalClock=document.getElementById("digital-clock"),geminiButton=document.getElementById("gemini-button"),factContainer=document.getElementById("fact-container"),BITS=6,currentTime={h:0,m:0};function createLights(e){for(let t=0;t<BITS;t++){var n=document.createElement("div");n.classList.add("light","w-8","h-8","md:w-12","md:h-12","rounded-full","bg-gray-700"),n.dataset.value=Math.pow(2,t),e.appendChild(n)}}function updateColumn(t,e,n){var o=n.toString(2).padStart(BITS,"0"),i=t.children;for(let t=0;t<BITS;t++){var a=i[t],r=o[BITS-1-t];a.classList.toggle(e,"1"===r)}}function updateClock(){var t=new Date,e=t.getHours(),n=t.getMinutes(),t=t.getSeconds();currentTime={h:e,m:n},updateColumn(hourColumn,"hour-on",e),updateColumn(minuteColumn,"minute-on",n),updateColumn(secondColumn,"second-on",t),digitalClock.textContent=`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:`+String(t).padStart(2,"0")}function getLocalTimeFact(t,e){t=[`Did you know? ${t}:00 is a great time to stretch!`,`At ${t}:${e}, the sun is in a different position around the world.`,`Binary for ${t} is ${t.toString(2)}, and for ${e} is ${e.toString(2)}.`,`Fun fact: ${t}:${e} in 24-hour time is ${t%12||12}:${e.toString().padStart(2,"0")} ${t<12?"AM":"PM"}.`,`Some clocks chime at ${t}:${e}!`,`In binary, ${t}:${e} is ${t.toString(2).padStart(6,"0")}:${e.toString(2).padStart(6,"0")}.`];return t[e%t.length]}async function getTimeFact(){geminiButton.disabled=!0,geminiButton.textContent="Thinking...",factContainer.innerHTML='<div class="animate-pulse">Fetching a fact from the cosmos...</div>';var{h:e,m:n}=currentTime,t=`Tell me a short, interesting, or historical fact related to the time ${String(e).padStart(2,"0")+":"+String(n).padStart(2,"0")}.`;try{var o=await fetch("timefact.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t})});if(!o.ok)throw new Error("Error: "+o.statusText);var i=await o.json();factContainer.textContent=i.fact||getLocalTimeFact(e,n)}catch(t){console.error(t),factContainer.textContent=getLocalTimeFact(e,n)}finally{geminiButton.disabled=!1,geminiButton.textContent="Get Time Fact âœ¨"}}createLights(hourColumn),createLights(minuteColumn),createLights(secondColumn),updateClock(),setInterval(updateClock,1e3),geminiButton.addEventListener("click",getTimeFact);